<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>基于 Proxy 的响应系统 | 渲染器</title>
    <meta name="description" content="也许是讲渲染器相关内容中最细最全的了吧">
    
    
    <link rel="preload" href="/vue-design/assets/css/0.styles.4be15b62.css" as="style"><link rel="preload" href="/vue-design/assets/js/app.a07aa37d.js" as="script"><link rel="preload" href="/vue-design/assets/js/14.41bbc7be.js" as="script"><link rel="prefetch" href="/vue-design/assets/js/10.06cef666.js"><link rel="prefetch" href="/vue-design/assets/js/11.24e9fa84.js"><link rel="prefetch" href="/vue-design/assets/js/12.799c2e6b.js"><link rel="prefetch" href="/vue-design/assets/js/13.6dd441b3.js"><link rel="prefetch" href="/vue-design/assets/js/15.6ee94265.js"><link rel="prefetch" href="/vue-design/assets/js/16.b7eae7f2.js"><link rel="prefetch" href="/vue-design/assets/js/2.20eca9e9.js"><link rel="prefetch" href="/vue-design/assets/js/3.9a8db04b.js"><link rel="prefetch" href="/vue-design/assets/js/4.969f6fb0.js"><link rel="prefetch" href="/vue-design/assets/js/5.f3743e28.js"><link rel="prefetch" href="/vue-design/assets/js/6.29bb6a84.js"><link rel="prefetch" href="/vue-design/assets/js/7.a10cfe04.js"><link rel="prefetch" href="/vue-design/assets/js/8.c4280381.js"><link rel="prefetch" href="/vue-design/assets/js/9.0a1e1f17.js">
    <link rel="stylesheet" href="/vue-design/assets/css/0.styles.4be15b62.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/vue-design/zh/" class="home-link router-link-active"><!----> <span class="site-name">渲染器</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/vue-design/zh/donor-list.html" class="nav-link">捐赠者名单</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vue-design/" class="nav-link">English</a></li><li class="dropdown-item"><!----> <a href="/vue-design/zh/observer.html" class="nav-link router-link-exact-active router-link-active">简体中文</a></li></ul></div></div> <a href="https://github.com/HcySunYang/vue-design" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/vue-design/zh/donor-list.html" class="nav-link">捐赠者名单</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vue-design/" class="nav-link">English</a></li><li class="dropdown-item"><!----> <a href="/vue-design/zh/observer.html" class="nav-link router-link-exact-active router-link-active">简体中文</a></li></ul></div></div> <a href="https://github.com/HcySunYang/vue-design" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/vue-design/zh/essence-of-comp.html" class="sidebar-link">组件的本质</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vue-design/zh/essence-of-comp.html#组件的产出是什么" class="sidebar-link">组件的产出是什么</a></li><li class="sidebar-sub-header"><a href="/vue-design/zh/essence-of-comp.html#组件的-vnode-如何表示" class="sidebar-link">组件的 VNode 如何表示</a></li><li class="sidebar-sub-header"><a href="/vue-design/zh/essence-of-comp.html#组件的种类" class="sidebar-link">组件的种类</a></li></ul></li><li><a href="/vue-design/zh/vnode.html" class="sidebar-link">先设计 VNode 吧</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vue-design/zh/vnode.html#用-vnode-描述真实-dom" class="sidebar-link">用 VNode 描述真实 DOM</a></li><li class="sidebar-sub-header"><a href="/vue-design/zh/vnode.html#用-vnode-描述抽象内容" class="sidebar-link">用 VNode 描述抽象内容</a></li><li class="sidebar-sub-header"><a href="/vue-design/zh/vnode.html#vnode-的种类" class="sidebar-link">VNode 的种类</a></li><li class="sidebar-sub-header"><a href="/vue-design/zh/vnode.html#使用-flags-作为-vnode-的标识" class="sidebar-link">使用 flags 作为 VNode 的标识</a></li><li class="sidebar-sub-header"><a href="/vue-design/zh/vnode.html#枚举值-vnodeflags" class="sidebar-link">枚举值 VNodeFlags</a></li><li class="sidebar-sub-header"><a href="/vue-design/zh/vnode.html#children-和-childrenflags" class="sidebar-link">children 和 ChildrenFlags</a></li><li class="sidebar-sub-header"><a href="/vue-design/zh/vnode.html#vnodedata" class="sidebar-link">VNodeData</a></li></ul></li><li><a href="/vue-design/zh/h.html" class="sidebar-link">辅助创建 VNode 的 h 函数</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vue-design/zh/h.html#在vnode创建时确定其类型-flags" class="sidebar-link">在VNode创建时确定其类型 - flags</a></li><li class="sidebar-sub-header"><a href="/vue-design/zh/h.html#在vnode创建时确定其children的类型" class="sidebar-link">在VNode创建时确定其children的类型</a></li><li class="sidebar-sub-header"><a href="/vue-design/zh/h.html#使用-h-函数创建-vnode" class="sidebar-link">使用 h 函数创建 VNode</a></li></ul></li><li><a href="/vue-design/zh/renderer.html" class="sidebar-link">渲染器之挂载</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vue-design/zh/renderer.html#责任重大的渲染器" class="sidebar-link">责任重大的渲染器</a></li><li class="sidebar-sub-header"><a href="/vue-design/zh/renderer.html#挂载普通标签元素" class="sidebar-link">挂载普通标签元素</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vue-design/zh/renderer.html#基本原理" class="sidebar-link">基本原理</a></li><li class="sidebar-sub-header"><a href="/vue-design/zh/renderer.html#class的处理" class="sidebar-link">class的处理</a></li><li class="sidebar-sub-header"><a href="/vue-design/zh/renderer.html#attributes-和-dom-properties" class="sidebar-link">Attributes 和 DOM Properties</a></li><li class="sidebar-sub-header"><a href="/vue-design/zh/renderer.html#事件的处理" class="sidebar-link">事件的处理</a></li></ul></li><li class="sidebar-sub-header"><a href="/vue-design/zh/renderer.html#挂载纯文本、fragment-和-portal" class="sidebar-link">挂载纯文本、Fragment 和 Portal</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vue-design/zh/renderer.html#挂载文本节点" class="sidebar-link">挂载文本节点</a></li><li class="sidebar-sub-header"><a href="/vue-design/zh/renderer.html#挂载-fragment" class="sidebar-link">挂载 Fragment</a></li><li class="sidebar-sub-header"><a href="/vue-design/zh/renderer.html#挂载-portal" class="sidebar-link">挂载 Portal</a></li></ul></li><li class="sidebar-sub-header"><a href="/vue-design/zh/renderer.html#有状态组件的挂载和原理" class="sidebar-link">有状态组件的挂载和原理</a></li><li class="sidebar-sub-header"><a href="/vue-design/zh/renderer.html#函数式组件的挂载和原理" class="sidebar-link">函数式组件的挂载和原理</a></li></ul></li><li><a href="/vue-design/zh/renderer-patch.html" class="sidebar-link">渲染器之patch</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vue-design/zh/renderer-patch.html#基本原则" class="sidebar-link">基本原则</a></li><li class="sidebar-sub-header"><a href="/vue-design/zh/renderer-patch.html#替换-vnode" class="sidebar-link">替换 VNode</a></li><li class="sidebar-sub-header"><a href="/vue-design/zh/renderer-patch.html#更新标签元素" class="sidebar-link">更新标签元素</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vue-design/zh/renderer-patch.html#更新标签元素的基本原则" class="sidebar-link">更新标签元素的基本原则</a></li><li class="sidebar-sub-header"><a href="/vue-design/zh/renderer-patch.html#更新-vnodedata" class="sidebar-link">更新 VNodeData</a></li><li class="sidebar-sub-header"><a href="/vue-design/zh/renderer-patch.html#更新子节点" class="sidebar-link">更新子节点</a></li></ul></li><li class="sidebar-sub-header"><a href="/vue-design/zh/renderer-patch.html#更新文本节点" class="sidebar-link">更新文本节点</a></li><li class="sidebar-sub-header"><a href="/vue-design/zh/renderer-patch.html#更新-fragment" class="sidebar-link">更新 Fragment</a></li><li class="sidebar-sub-header"><a href="/vue-design/zh/renderer-patch.html#更新-portal" class="sidebar-link">更新 Portal</a></li><li class="sidebar-sub-header"><a href="/vue-design/zh/renderer-patch.html#有状态组件的更新" class="sidebar-link">有状态组件的更新</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vue-design/zh/renderer-patch.html#主动更新" class="sidebar-link">主动更新</a></li><li class="sidebar-sub-header"><a href="/vue-design/zh/renderer-patch.html#初步了解组件的外部状态-props" class="sidebar-link">初步了解组件的外部状态 props</a></li><li class="sidebar-sub-header"><a href="/vue-design/zh/renderer-patch.html#被动更新" class="sidebar-link">被动更新</a></li><li class="sidebar-sub-header"><a href="/vue-design/zh/renderer-patch.html#我们需要-shouldupdatecomponent" class="sidebar-link">我们需要 shouldUpdateComponent</a></li></ul></li><li class="sidebar-sub-header"><a href="/vue-design/zh/renderer-patch.html#函数式组件的更新" class="sidebar-link">函数式组件的更新</a></li></ul></li><li><a href="/vue-design/zh/renderer-diff.html" class="sidebar-link">渲染器的核心 Diff 算法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vue-design/zh/renderer-diff.html#减小dom操作的性能开销" class="sidebar-link">减小DOM操作的性能开销</a></li><li class="sidebar-sub-header"><a href="/vue-design/zh/renderer-diff.html#尽可能的复用-dom-元素" class="sidebar-link">尽可能的复用 DOM 元素</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vue-design/zh/renderer-diff.html#key-的作用" class="sidebar-link">key 的作用</a></li><li class="sidebar-sub-header"><a href="/vue-design/zh/renderer-diff.html#找到需要移动的节点" class="sidebar-link">找到需要移动的节点</a></li><li class="sidebar-sub-header"><a href="/vue-design/zh/renderer-diff.html#移动节点" class="sidebar-link">移动节点</a></li><li class="sidebar-sub-header"><a href="/vue-design/zh/renderer-diff.html#添加新元素" class="sidebar-link">添加新元素</a></li><li class="sidebar-sub-header"><a href="/vue-design/zh/renderer-diff.html#移除不存在的元素" class="sidebar-link">移除不存在的元素</a></li></ul></li><li class="sidebar-sub-header"><a href="/vue-design/zh/renderer-diff.html#另一个思路-双端比较" class="sidebar-link">另一个思路 - 双端比较</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vue-design/zh/renderer-diff.html#双端比较的原理" class="sidebar-link">双端比较的原理</a></li><li class="sidebar-sub-header"><a href="/vue-design/zh/renderer-diff.html#双端比较的优势" class="sidebar-link">双端比较的优势</a></li><li class="sidebar-sub-header"><a href="/vue-design/zh/renderer-diff.html#非理想情况的处理方式" class="sidebar-link">非理想情况的处理方式</a></li><li class="sidebar-sub-header"><a href="/vue-design/zh/renderer-diff.html#添加新元素-2" class="sidebar-link">添加新元素</a></li><li class="sidebar-sub-header"><a href="/vue-design/zh/renderer-diff.html#移除不存在的元素-2" class="sidebar-link">移除不存在的元素</a></li></ul></li><li class="sidebar-sub-header"><a href="/vue-design/zh/renderer-diff.html#inferno-所采用的核心-diff-算法及原理" class="sidebar-link">inferno 所采用的核心 Diff 算法及原理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vue-design/zh/renderer-diff.html#相同的前置和后置元素" class="sidebar-link">相同的前置和后置元素</a></li><li class="sidebar-sub-header"><a href="/vue-design/zh/renderer-diff.html#判断是否需要进行-dom-移动" class="sidebar-link">判断是否需要进行 DOM 移动</a></li><li class="sidebar-sub-header"><a href="/vue-design/zh/renderer-diff.html#dom-移动的方式" class="sidebar-link">DOM 移动的方式</a></li><li class="sidebar-sub-header"><a href="/vue-design/zh/renderer-diff.html#求解最长递增子序列" class="sidebar-link">求解最长递增子序列</a></li></ul></li><li class="sidebar-sub-header"><a href="/vue-design/zh/renderer-diff.html#不足之处" class="sidebar-link">不足之处</a></li><li class="sidebar-sub-header"><a href="/vue-design/zh/renderer-diff.html#references" class="sidebar-link">References</a></li></ul></li><li><a href="/vue-design/zh/renderer-advanced.html" class="sidebar-link">自定义渲染器</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vue-design/zh/renderer-advanced.html#自定义渲染器的原理" class="sidebar-link">自定义渲染器的原理</a></li><li class="sidebar-sub-header"><a href="/vue-design/zh/renderer-advanced.html#自定义渲染器的应用" class="sidebar-link">自定义渲染器的应用</a></li><li class="sidebar-sub-header"><a href="/vue-design/zh/renderer-advanced.html#references" class="sidebar-link">References</a></li></ul></li></ul> </div> <div class="page"> <div class="content"><h1 id="基于-proxy-的响应系统"><a href="#基于-proxy-的响应系统" aria-hidden="true" class="header-anchor">#</a> 基于 Proxy 的响应系统</h1> <h2 id="基本原理"><a href="#基本原理" aria-hidden="true" class="header-anchor">#</a> 基本原理</h2> <h2 id="对象和数组的代理"><a href="#对象和数组的代理" aria-hidden="true" class="header-anchor">#</a> 对象和数组的代理</h2> <h2 id="集合的代理"><a href="#集合的代理" aria-hidden="true" class="header-anchor">#</a> 集合的代理</h2> <h2 id="计算属性"><a href="#计算属性" aria-hidden="true" class="header-anchor">#</a> 计算属性</h2> <h2 id="watch-的实现"><a href="#watch-的实现" aria-hidden="true" class="header-anchor">#</a> Watch 的实现</h2> <h2 id="组件实例的访问代理"><a href="#组件实例的访问代理" aria-hidden="true" class="header-anchor">#</a> 组件实例的访问代理</h2></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/HcySunYang/vue-design/edit/master/docs/zh/observer.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></div> <!----> </div> <!----></div></div>
    <script src="/vue-design/assets/js/14.41bbc7be.js" defer></script><script src="/vue-design/assets/js/app.a07aa37d.js" defer></script>
  </body>
</html>
